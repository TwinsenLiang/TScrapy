# å®‰å…¨æ€§æ£€æŸ¥æŠ¥å‘Š

## ğŸ“‹ æ£€æŸ¥æ—¥æœŸ

2025-12-11

## âœ… å·²å®ç°çš„å®‰å…¨æªæ–½

### 1. è¾“å…¥éªŒè¯

- âœ… **URL éªŒè¯**: å¼ºåˆ¶è¦æ±‚ URL ä»¥ `http://` æˆ– `https://` å¼€å¤´
- âœ… **å‚æ•°ç±»å‹æ£€æŸ¥**: ä½¿ç”¨ argparse è¿›è¡Œç±»å‹éªŒè¯ï¼ˆintã€floatã€stringï¼‰
- âœ… **æ–‡ä»¶åæ¸…ç†**: `sanitize_filename()` æ–¹æ³•ç§»é™¤éæ³•å­—ç¬¦ï¼Œé˜²æ­¢è·¯å¾„éå†æ”»å‡»

```python
# ä»£ç ä½ç½®: scraper.py:220-227
@staticmethod
def sanitize_filename(filename: str) -> str:
    illegal_chars = '<>:"/\\|?*'
    for char in illegal_chars:
        filename = filename.replace(char, '')
    filename = ''.join(c for c in filename if c.isalnum() or c in (' ', '.', '_', '-', '(', ')'))
    filename = filename.strip().replace(' ', '_')
    return filename[:100] if filename else 'untitled'
```

### 2. ç½‘ç»œå®‰å…¨

- âœ… **è¿æ¥è¶…æ—¶**: è®¾ç½® 10 ç§’è¿æ¥è¶…æ—¶ï¼Œ90 ç§’è¯»å–è¶…æ—¶ï¼Œé˜²æ­¢é•¿æ—¶é—´æŒ‚èµ·
- âœ… **å¤±è´¥é‡è¯•**: HTTPAdapter é…ç½® 3 æ¬¡é‡è¯•ï¼Œé¿å…ä¸´æ—¶ç½‘ç»œé—®é¢˜
- âœ… **è¯·æ±‚å»¶è¿Ÿ**: 2-4 ç§’éšæœºå»¶è¿Ÿï¼Œå¯è‡ªå®šä¹‰ï¼Œé¿å…é¢‘ç¹è¯·æ±‚è¢«å°
- âœ… **HTTPS æ”¯æŒ**: å®Œå…¨æ”¯æŒ HTTPS å®‰å…¨è¿æ¥
- âœ… **User-Agent è®¾ç½®**: ä½¿ç”¨çœŸå®æµè§ˆå™¨çš„ User-Agentï¼Œé¿å…è¢«è¯†åˆ«ä¸ºæœºå™¨äºº

```python
# ä»£ç ä½ç½®: scraper.py:74-81
response = self.session.get(url, timeout=(10, 90))
```

### 3. èµ„æºæ§åˆ¶

- âœ… **æ·±åº¦é™åˆ¶**: é˜²æ­¢æ— é™é€’å½’çˆ¬å–
- âœ… **åŸŸåé™åˆ¶**: é»˜è®¤åªçˆ¬å–åŒåŸŸåé“¾æ¥ï¼ˆ`same_domain_only=True`ï¼‰
- âœ… **URL å»é‡**: ä½¿ç”¨ Set å­˜å‚¨å·²çˆ¬å– URLï¼Œé¿å…é‡å¤çˆ¬å–
- âœ… **æ–‡ä»¶ç±»å‹è¿‡æ»¤**: é»˜è®¤æ’é™¤ `.pdf`, `.zip`, `.tar`, `.gz`, `.exe` ç­‰äºŒè¿›åˆ¶æ–‡ä»¶

```python
# ä»£ç ä½ç½®: scraper.py:123-125
if depth > self.depth_limit:
    self.stats['skipped'] += 1
    continue
```

### 4. å¼‚å¸¸å¤„ç†

- âœ… **è¯·æ±‚å¼‚å¸¸æ•è·**: æ•è· `requests.exceptions.RequestException`
- âœ… **é€šç”¨å¼‚å¸¸æ•è·**: é˜²æ­¢ç¨‹åºå´©æºƒ
- âœ… **ä¸­æ–­å¤„ç†**: æ”¯æŒ Ctrl+C ä¼˜é›…ä¸­æ–­ï¼ˆKeyboardInterruptï¼‰
- âœ… **é”™è¯¯æ—¥å¿—**: æ‰€æœ‰é”™è¯¯éƒ½ä¼šæ‰“å°è¯¦ç»†ä¿¡æ¯

```python
# ä»£ç ä½ç½®: scraper.py:68-77
try:
    response = self.session.get(url, timeout=(10, 90))
    response.raise_for_status()
    return response
except requests.exceptions.RequestException as e:
    print(f"âœ— è¯·æ±‚å¤±è´¥ {url}: {e}")
    return None
except Exception as e:
    print(f"âœ— æœªçŸ¥é”™è¯¯ {url}: {e}")
    return None
```

### 5. æ•°æ®å®‰å…¨

- âœ… **æ–‡ä»¶ç¼–ç **: ç»Ÿä¸€ä½¿ç”¨ UTF-8 ç¼–ç ï¼Œé¿å…ç¼–ç é—®é¢˜
- âœ… **ç›®å½•åˆ›å»º**: å®‰å…¨åˆ›å»ºè¾“å‡ºç›®å½•ï¼ˆ`exist_ok=True`ï¼‰
- âœ… **å“ˆå¸Œå‘½å**: ä½¿ç”¨ MD5 å“ˆå¸Œé¿å…æ–‡ä»¶åå†²çª

## âš ï¸ æ½œåœ¨é£é™©åŠç¼“è§£æªæ–½

### 1. ç£ç›˜ç©ºé—´è€—å°½

**é£é™©**: å¤§è§„æ¨¡çˆ¬å–å¯èƒ½å ç”¨å¤§é‡ç£ç›˜ç©ºé—´

**ç¼“è§£æªæ–½**:
- ç”¨æˆ·éœ€è¦ç›‘æ§ç£ç›˜ç©ºé—´
- å»ºè®®åœ¨ ROADMAP ä¸­æ·»åŠ ç£ç›˜ç©ºé—´æ£€æŸ¥åŠŸèƒ½

### 2. å†…å­˜å ç”¨

**é£é™©**: URL é˜Ÿåˆ—åœ¨å¤§è§„æ¨¡çˆ¬å–æ—¶å¯èƒ½å ç”¨å¤§é‡å†…å­˜

**å½“å‰çŠ¶æ€**:
- ä½¿ç”¨ç®€å•çš„ list å’Œ set å­˜å‚¨ URL
- å¯¹äº < 10000 é¡µé¢è§„æ¨¡å¯æ¥å—

**ç¼“è§£æªæ–½**:
- å»ºè®®åœ¨ ROADMAP ä¸­æ·»åŠ æŒä¹…åŒ–é˜Ÿåˆ—æ”¯æŒ

### 3. robots.txt æ£€æŸ¥

**é£é™©**: æœªæ£€æŸ¥ robots.txtï¼Œå¯èƒ½è¿åç½‘ç«™è§„åˆ™

**å½“å‰çŠ¶æ€**: âŒ æœªå®ç°

**å»ºè®®**: åœ¨ ROADMAP ä¸­æ·»åŠ  robots.txt è§£æåŠŸèƒ½

### 4. é€Ÿç‡é™åˆ¶

**é£é™©**: è¿‡å¿«è¯·æ±‚å¯èƒ½å¯¼è‡´ IP è¢«å°

**å½“å‰çŠ¶æ€**: âœ… å·²é€šè¿‡å»¶è¿Ÿæœºåˆ¶ç¼“è§£

**å»ºè®®**:
- ç”¨æˆ·éœ€è¦æ ¹æ®ç›®æ ‡ç½‘ç«™è°ƒæ•´å»¶è¿Ÿ
- å»ºè®®åœ¨ ROADMAP ä¸­æ·»åŠ è‡ªåŠ¨é€Ÿç‡æ§åˆ¶

### 5. æ¶æ„ç½‘ç«™

**é£é™©**: çˆ¬å–çš„å†…å®¹å¯èƒ½åŒ…å«æ¶æ„è„šæœ¬æˆ–é“¾æ¥

**å½“å‰çŠ¶æ€**: âœ… åªä¿å­˜æ–‡æœ¬ï¼Œä¸æ‰§è¡Œ JavaScript

**å»ºè®®**:
- ç”¨æˆ·éœ€è¦å°å¿ƒæ‰“å¼€çˆ¬å–çš„ HTML æ–‡ä»¶
- å»ºè®®æ·»åŠ å†…å®¹æ‰«æåŠŸèƒ½

## ğŸ”’ OWASP Top 10 æ£€æŸ¥

| é£é™©ç±»å‹ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| **A01: è®¿é—®æ§åˆ¶å¤±æ•ˆ** | âœ… ä¸é€‚ç”¨ | æœ¬å·¥å…·ä¸æ¶‰åŠç”¨æˆ·è®¤è¯å’Œæˆæƒ |
| **A02: åŠ å¯†å¤±è´¥** | âœ… å®‰å…¨ | ä½¿ç”¨ HTTPSï¼Œä¸å­˜å‚¨æ•æ„Ÿæ•°æ® |
| **A03: æ³¨å…¥** | âœ… å®‰å…¨ | ä¸æ¶‰åŠ SQLã€å‘½ä»¤æ³¨å…¥ |
| **A04: ä¸å®‰å…¨è®¾è®¡** | âœ… å®‰å…¨ | æœ‰æ·±åº¦é™åˆ¶ã€åŸŸåé™åˆ¶ç­‰å®‰å…¨è®¾è®¡ |
| **A05: å®‰å…¨é…ç½®é”™è¯¯** | âœ… å®‰å…¨ | é»˜è®¤é…ç½®è¾ƒä¸ºä¿å®ˆ |
| **A06: æ˜“å—æ”»å‡»ç»„ä»¶** | âš ï¸ æ³¨æ„ | ä¾èµ–åŒ…éœ€è¦å®šæœŸæ›´æ–° |
| **A07: èº«ä»½è¯†åˆ«å¤±è´¥** | âœ… ä¸é€‚ç”¨ | ä¸æ¶‰åŠèº«ä»½è®¤è¯ |
| **A08: è½¯ä»¶å®Œæ•´æ€§å¤±è´¥** | âœ… å®‰å…¨ | ä½¿ç”¨ requirements.txt å›ºå®šç‰ˆæœ¬ |
| **A09: è®°å½•å¤±è´¥** | âš ï¸ å¯æ”¹è¿› | å½“å‰åªæœ‰ printï¼Œå»ºè®®ä½¿ç”¨ logging æ¨¡å— |
| **A10: SSRF** | âœ… å®‰å…¨ | ç”¨æˆ·æ˜ç¡®æä¾› URLï¼Œæœ‰åŸŸåé™åˆ¶ |

## ğŸ“ å®‰å…¨ä½¿ç”¨å»ºè®®

### å¯¹äºç”¨æˆ·

1. **éµå®ˆæ³•å¾‹æ³•è§„**
   - æ£€æŸ¥ç›®æ ‡ç½‘ç«™çš„ robots.txt
   - éµå®ˆæœåŠ¡æ¡æ¬¾
   - ä¸çˆ¬å–å—ç‰ˆæƒä¿æŠ¤çš„å†…å®¹

2. **åˆç†é…ç½®å‚æ•°**
   - è®¾ç½®é€‚å½“çš„å»¶è¿Ÿæ—¶é—´ï¼ˆå»ºè®®è‡³å°‘ 2 ç§’ï¼‰
   - é™åˆ¶çˆ¬å–æ·±åº¦ï¼Œé¿å…è¿‡åº¦çˆ¬å–
   - ä½¿ç”¨ `--exclude` æ’é™¤æ•æ„Ÿé¡µé¢

3. **ç›‘æ§èµ„æºä½¿ç”¨**
   - å®šæœŸæ£€æŸ¥ç£ç›˜ç©ºé—´
   - ç›‘æ§ç½‘ç»œæµé‡
   - æ³¨æ„çˆ¬å–æ—¶é•¿

4. **å®‰å…¨å¤„ç†æ•°æ®**
   - å°å¿ƒæ‰“å¼€çˆ¬å–çš„ HTML æ–‡ä»¶ï¼ˆå¯èƒ½åŒ…å«æ¶æ„è„šæœ¬ï¼‰
   - ä¸è¦åœ¨æµè§ˆå™¨ä¸­ç›´æ¥æ‰“å¼€æ¥æºä¸æ˜çš„ HTML
   - å®šæœŸæ¸…ç†ä¸éœ€è¦çš„æ•°æ®

### å¯¹äºå¼€å‘è€…

1. **ä¾èµ–æ›´æ–°**
   ```bash
   # å®šæœŸæ£€æŸ¥ä¾èµ–æ›´æ–°
   pip list --outdated
   pip install --upgrade requests beautifulsoup4 lxml
   ```

2. **å®‰å…¨å®¡è®¡**
   ```bash
   # ä½¿ç”¨ safety æ£€æŸ¥å®‰å…¨æ¼æ´
   pip install safety
   safety check
   ```

3. **ä»£ç å®¡æŸ¥**
   - å®šæœŸæ£€æŸ¥ä»£ç ä¸­çš„å®‰å…¨é—®é¢˜
   - å…³æ³¨ GitHub Security Advisories

## ğŸ”§ åç»­å®‰å…¨æ”¹è¿›

å‚è§ [ROADMAP.md](ROADMAP.md) ä¸­çš„å®‰å…¨ç›¸å…³æ”¹è¿›é¡¹ï¼š

- [ ] æ·»åŠ  robots.txt æ£€æŸ¥
- [ ] å®ç°å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ
- [ ] æ·»åŠ å†…å®¹å®‰å…¨æ‰«æ
- [ ] æ”¯æŒä»£ç†å’Œ IP è½®æ¢
- [ ] æ·»åŠ é€Ÿç‡é™åˆ¶å™¨

## ğŸ“ æŠ¥å‘Šå®‰å…¨é—®é¢˜

å¦‚æœæ‚¨å‘ç°å®‰å…¨æ¼æ´ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼æŠ¥å‘Šï¼š

- **ç§å¯†æŠ¥å‘Š**: å‘é€é‚®ä»¶è‡³ security@example.com
- **ä¸è¦å…¬å¼€**: è¯·å‹¿åœ¨ Issue ä¸­å…¬å¼€å®‰å…¨æ¼æ´
- **è¯¦ç»†æè¿°**: æä¾›è¯¦ç»†çš„æ¼æ´æè¿°å’Œå¤ç°æ­¥éª¤

æˆ‘ä»¬ä¼šåœ¨ 48 å°æ—¶å†…å›å¤ï¼Œå¹¶åœ¨ä¿®å¤åå…¬å¼€è‡´è°¢ã€‚

---

**æœ€åæ›´æ–°**: 2025-12-11
**å®¡æ ¸è€…**: Claude Code
**ç‰ˆæœ¬**: 1.0.0
